!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=0)}([function(e,t,r){"use strict";var n,a=r(1),i=(n=a)&&n.__esModule?n:{default:n};window.Form=i.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(2),s=(n=i)&&n.__esModule?n:{default:n};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t,r){var n=this,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];u(this,e),this._form=t,this.submitCallback=r,this._rule={},this.conf={verify_rule_attr:"data-verify-rule",check_mode_attr:"data-check-mode",msg_attr:"data-msg",error_class:"form-item-check-error",show_error_msg:!0},this._message={},this._validate=new s.default,this.eventHandler={submit:this.formSubmitEvent.bind(this),change:this.changeEvent.bind(this),blur:this.blurEvent.bind(this)},this.eventRegister={submit:[],change:[],blur:[]},a&&(this.bindEvent(this._form,"submit"),this.__getFormDom(this._form).forEach((function(e){n.addListen(e)}))),this.formData={get:function(e){var t={};return this.__getInput(e,t),this.__getSelect(e,t),this.__getTextarea(e,t),JSON.parse(JSON.stringify(t))},__getInput:function(e,t){var r=this;e.querySelectorAll("input").forEach((function(e){if(e.name){var n=void 0;n="checkbox"===e.type||"radio"===e.type?!!e.checked&&e.value:e.value,r.__save(e.name,n,t)}}))},__getSelect:function(e,t){var r=this;e.querySelectorAll("select").forEach((function(e){e.name&&e.selectedIndex&&e.options[e.selectedIndex]&&r.__save(e.name,e.options[e.selectedIndex].value,t)}))},__getTextarea:function(e,t){var r=this;e.querySelectorAll("textarea").forEach((function(e){e.name&&r.__save(e.name,e.value,t)}))},__save:function(e,t,r){if(/\[.*]/.test(e)){if(/^([^\[]+)/g.exec(e)){var n=/^([^\[]+)/g.exec(e)[1];e=e.replace(n,""),r[n]||(r[n]=[]),r=r[n]}for(;/\[.*]/.test(e);){var a=/^\[([^]]*)/g.exec(e)[1].replace("]","");if(e=e.replace("["+a+"]",""),!a)break;r[a]||(r[a]=[]),r=r[a],/\[.*]/.test(e)||(e?r[e]=t:r.push(t))}}else r[e]=t}}}return a(e,[{key:"validate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&(this._validate=e),this._validate}},{key:"rule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?this._rule[e]=t:Object.assign(this._rule,e),this}},{key:"message",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?this._message[e]=t:Object.assign(this._message,e),this}},{key:"formSubmitEvent",value:function(e){var t=this.formData.get(e.target),r=this.check(e.target,t);this.submitCallback&&this.submitCallback(t,e,r)}},{key:"bindEvent",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r||(r=this.eventHandler[t]),this.eventRegister[t].push({elem:e,fn:r}),e.addEventListener(t,r)}},{key:"addListen",value:function(e){var t=e.getAttribute(this.conf.check_mode_attr);(t=t||"blur")&&("change"===t.toLocaleLowerCase()&&this.bindEvent(e,"change"),"blur"===t.toLocaleLowerCase()&&this.bindEvent(e,"blur"))}},{key:"changeEvent",value:function(e){var t=this.formData.get(this._form);this.checkItem(e.target,t)}},{key:"blurEvent",value:function(e){var t=this.formData.get(this._form);this.checkItem(e.target,t)}},{key:"check",value:function(e,t){var r=this,n=!0;return this.__getFormDom(e).forEach((function(e){e.name&&!r.checkItem(e,t)&&(n=!1)})),n}},{key:"checkItem",value:function(e,t){var r=this.__handleDomKey(e.name),n=this.__getElemVal(e),a=this.__getRule(r,e);if(!a)return!0;var i=this._validate.checkItem(r,n,a,t);if(!0!==i){var s=this.__getMsg(r,i,e);return s=s||i,this.conf.show_error_msg&&this.showError(e,s),!1}return this.conf.show_error_msg&&this.removeError(e),!0}},{key:"__getRule",value:function(e,t){if(this._rule[e])return this._rule[e];var r=t.getAttribute(this.conf.verify_rule_attr);return r||null}},{key:"__getMsg",value:function(e,t,r){var n=t.split(" ")[0];if(this._message[e+"."+n])return this._message[e+"."+n];if(this._message[e])return this._message[e];var a=r.getAttribute(this.conf.msg_attr);if(/^{[\s\S]+}$/.test(a))try{var i=JSON.parse(a);for(var s in i)if(i.hasOwnProperty(s)&&s===n)return i[s]}catch(e){}return a}},{key:"showError",value:function(e,t){e.classList.add(this.conf.error_class);for(var r=0;r<e.parentNode.children.length;r++)e.parentNode.children[r].classList.contains("form-item-check-error-msg")&&e.parentNode.children[r].remove();var n=document.createElement("SPAN");n.classList.add("form-item-check-error-msg"),n.innerHTML=t,e.parentNode.appendChild(n)}},{key:"removeError",value:function(e){e.classList.remove("form-item-check-error");for(var t=0;t<e.parentNode.children.length;t++)e.parentNode.children[t].classList.contains("form-item-check-error-msg")&&e.parentNode.children[t].remove()}},{key:"__getElemVal",value:function(e){switch(e.tagName.toLocaleUpperCase()){case"INPUT":return"checkbox"===e.type||"radio"===e.type?!!e.checked&&e.value:e.value;case"SELECT":return e.name&&e.selectedIndex&&e.options[e.selectedIndex]?e.options[e.selectedIndex].value:null;case"TEXTAREA":return e.value;default:return null}}},{key:"__getFormDom",value:function(e){return e.querySelectorAll("input,select,textarea")}},{key:"__handleDomKey",value:function(e){var t=/^([^\[]+)/g.exec(e)[1];for(e=e.replace(t,"");/\[.*]/.test(e);){var r=/^\[([^]]*)/g.exec(e)[1].replace("]","");e=e.replace("["+r+"]",""),r&&(t+="."+r)}return t}}]),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._message={},this._rule={},this._regx={mobile:"^[1][3,4,5,7,8][0-9]{9}$",email:"^[a-z0-9]+([._\\\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$"},this._error={},this._type={},this._batch=!0,this._alias={">=":"egt",">":"gt","=":"eq","<":"lt","<=":"lte","!=":"unequal","<>":"unequal"}}return n(e,[{key:"batch",value:function(e){return this._batch=e,this}},{key:"regx",value:function(e,t){return t?this._regx[e]=t:Object.assign(this._regx,e),this}},{key:"type",value:function(e,t){return t?this._type[e]=t:Object.assign(this._type,e),this}},{key:"message",value:function(e,t){return t?this._message[e]=t:Object.assign(this._message,e),this}},{key:"rule",value:function(e,t){return t?this._rule[e]=t:Object.assign(this._rule,e),this}},{key:"check",value:function(e,t){for(var r in t||(t=this._rule),t)if(t.hasOwnProperty(r)){var n=t[r],a=this.getInputData(r,e),i=void 0;if(!0!==(i=t instanceof Function?t(a,n,e):this.checkItem(r,a,n,e))){if(!this._batch)return this._error=i,!1;this._error[r]=i}}return this.empty(this._error)}},{key:"getError",value:function(){return this._error}},{key:"clear",value:function(){this._error={},this._batch=!0,this._message={},this._rule={},this._type={}}},{key:"checkItem",value:function(e,t,r,n){for(var a in"string"==typeof r&&(r=r.split("|")),r)if(r.hasOwnProperty(a)){var i=r[a],s=void 0,u=a instanceof Number?"":a;if(i instanceof Function)s=i(t,e,n);else{var o=this.getValidateType(a,i);u=o[2],i=o[1];var c=o[0];s="has"!==u&&"require"!==u&&(null===t||""===t)||this[c](t,i,n,e)}if(!s)return this.__getMsg(e,u)}return!0}},{key:"getValidateType",value:function(e,t){if(e instanceof Number)return this._alias[e]&&(e=this._alias[e]),[e,t,e];var r=void 0,n=void 0;if(t.indexOf(":")>0){var a=t.split(":",2);r=a[0],this._alias[r]&&(r=this._alias[r]),n=r,t=a[1]}else this[t]&&this[t]instanceof Function?(r=t,n=t,t=""):(r="is",n=t);return[r,t,n]}},{key:"getInputData",value:function(e,t){if(e.indexOf(".")>0)return t[e]?t[e]:null;for(var r=e.split("."),n=0;n<r.length;n++){if(void 0===t[r[n]]||null===t[r[n]])return null;t=t[r[n]]}return t}},{key:"__getMsg",value:function(e,t){for(var r in this._message)if(this._message.hasOwnProperty(r)){var n=(r+"").split(",");if(this.inArray(n,e)||this.inArray(n,e+"."+t))return this._message[r]}return t+" "+e}},{key:"is",value:function(e,t,r,n){var a=void 0;switch(t){case"require":a=!this.empty(e)||"0"===e;break;case"has":a=null!==this.getInputData(n,r);break;case"accepted":a=this.inArray(["1","on","yes"],e);break;case"boolean":case"bool":a=this.inArray([!0,!1,0,1,"0","1"],e);break;case"number":a=/^([-|+]?\d+|[-|+]?\d+\.\d+)$/.test(e+"");break;case"alpha":a=!/^[^a-zA-z]$/.test(e);break;case"alphaNum":a=!/^[^a-zA-z0-9]$/.test(e);break;case"chs":a=/^[\u4E00-\u9FA5]+$/.test(e);break;case"chsAlpha":a=!/[^\u4E00-\u9FA5a-zA-z]/.test(e);break;case"chsAlphaNum":a=!/[^\u4E00-\u9FA5a-zA-z0-9]/.test(e);break;case"array":a="[object array]"===Object.prototype.toString.call(e).toLocaleLowerCase();break;case"object":a="[object object]"===Object.prototype.toString.call(e).toLocaleLowerCase();break;case"func":case"function":a="[object function]"===Object.prototype.toString.call(e).toLocaleLowerCase();break;case"int":a=/^[-|+]?\d+$/.test(e);break;case"float":a=/^[-|+]?\d+\.\d+$/.test(e);break;default:switch(!0){case t instanceof Function:a=t(e,t,r,n);break;case this[t]instanceof Function:a=this[t](e,t,r,n);break;case void 0!==this._regx[t]:a="string"==typeof this._regx[t]?new RegExp(this._regx[t]).test(e):this._regx[t].test(e);break;case void 0!==this._type[t]:a=this._type[t](e,t,r,n);break;default:throw new Error("validate rule not exits: "+t)}}return a}},{key:"empty",value:function(e){return void 0===e||("string"==typeof e&&""===e.trim()||(!1===e||(e instanceof Array&&0===e.length||(null===e||("number"==typeof e&&0===parseInt(e)&&!1===/\./.test(e.toString())||e instanceof Object&&"{}"===JSON.stringify(e))))))}},{key:"inArray",value:function(e,t){for(var r in e)if(e[r]==t)return!0;return!1}},{key:"egt",value:function(e,t,r){return e>=this.getInputData(r,t)}},{key:"gt",value:function(e,t,r){return e>this.getInputData(r,t)}},{key:"eq",value:function(e,t,r){return e==this.getInputData(r,t)}},{key:"lt",value:function(e,t,r){return e<this.getInputData(r,t)}},{key:"lte",value:function(e,t,r){return e<=this.getInputData(r,t)}},{key:"unequal",value:function(e,t,r){return e!=this.getInputData(r,t)}},{key:"in",value:function(e,t){return t instanceof Array?this.inArray(t,e):this.inArray(t.split(","),e)}},{key:"notIn",value:function(e,t){return!(t instanceof Array?this.inArray(t,e):this.inArray(t.split(","),e))}},{key:"ipv6",value:function(e){return/:/.test(e)&&e.match(/:/g).length<8&&/::/.test(e)?1===e.match(/::/g).length&&/^::$|^(::)?([\da-f]{1,4}(:|::))*[\da-f]{1,4}(:|::)?$/i.test(e):/^([\da-f]{1,4}:){7}[\da-f]{1,4}$/i.test(e)}},{key:"ipv4",value:function(e){return/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)}},{key:"ip",value:function(e){return this.ipv4(e)||this.ipv6(e)}},{key:"length",value:function(e,t){var r=this.getDataLength(e);if("string"==typeof t&&t.indexOf(",")>0){var n=t.split(",",2);return r>=n[0]&&r<=n[1]}return e==r}},{key:"max",value:function(e,t){var r=this.strToNumber(t);return!1===r&&console.warn("Warning: Validate max rule value expect number given "+this.getDataType(t)),!1===this.strToNumber(e)&&(e=this.getDataLength(e)),e<=r}},{key:"min",value:function(e,t){var r=this.strToNumber(t);return!1===r&&console.warn("Warning: Validate min rule value expect number given "+this.getDataType(t)),!1===this.strToNumber(e)&&(e=this.getDataLength(e)),e>=r}},{key:"strToNumber",value:function(e){var t=this.getDataType(e);if("string"!==t&&"number"!==t)return!1;var r=Number(e);return r+""!="NaN"&&r}},{key:"getDataType",value:function(e){return Object.prototype.toString.call(e).toLocaleLowerCase().replace(/[\[\]]/g,"").split(" ")[1]}},{key:"getDataLength",value:function(e){var t=0,r=this.getDataType(e);switch(r){case"object":case"array":for(var n in e)e.hasOwnProperty(n)&&t++;break;case"string":t=e.length;break;case"number":t=e;break;default:console.warn("Warning: Validate get data length function params 1 data type not support: "+r)}return t}}]),e}();t.default=a}]);